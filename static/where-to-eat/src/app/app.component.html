<div class="row" *ngIf="pageState === 'beforeSearch'">
    <div class="col-xs-12 full-width">
        <div id="search-card-container">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>Get Started</mat-card-title>
                    <mat-card-subtitle>Enter your address or coordinates</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <div id="search-container">
                        <small class="error-text" *ngIf="httpErrorMessage">
                            Unable to reach the server. Please try again later.
                        </small>
                        <mat-form-field class="full-width">
                            <input matInput [(ngModel)]="targetLocation" placeholder="Address">
                            <button mat-button *ngIf="targetLocation" matSuffix mat-icon-button
                                    aria-label="Clear" (click)="targetLocation=null;">
                                <mat-icon>close</mat-icon>
                            </button>
                        </mat-form-field>
                        <table cellspacing="0">
                            <tr>
                                <td>
                                    <mat-form-field>
                                        <input matInput type="number"
                                               [(ngModel)]="targetLatitude"
                                               placeholder="Latitude">
                                        <button mat-button *ngIf="targetLatitude" matSuffix mat-icon-button
                                                aria-label="Clear" (click)="targetLatitude=null; targetLongitude=null">
                                            <mat-icon>close</mat-icon>
                                        </button>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field>
                                        <input matInput type="number"
                                               [(ngModel)]="targetLongitude"
                                               placeholder="Longitude">
                                        <button mat-button *ngIf="targetLongitude" matSuffix mat-icon-button
                                                aria-label="Clear" (click)="targetLatitude=null; targetLongitude=null">
                                            <mat-icon>close</mat-icon>
                                        </button>
                                    </mat-form-field>
                                </td>
                            </tr>
                        </table>
                        <span>
                            <small
                                    *ngIf="(targetLocation == null || targetLocation === '')
                                    && (!targetLatitude || !targetLongitude)">
                                    Enter your address or coordinates to continue
                            </small>
                            <small class="error-text" *ngIf="
                            !((targetLocation == null || targetLocation === '')
                                && (!targetLatitude || !targetLongitude)) &&
                            ((targetLatitude != null && targetLongitude != null)
                         && (abs(targetLatitude) > 90 || abs(targetLongitude) > 180))">
                                Your coordinates seem to be invalid
                            </small>
                            <button *ngIf="(!((targetLocation == null || targetLocation === '')
                                    && (!targetLatitude || !targetLongitude)) &&
                            !((targetLatitude != null && targetLongitude != null)
                             && (abs(targetLatitude) > 90 || abs(targetLongitude) > 180)))"
                                    mat-raised-button color="accent"
                                    (click)="doSeearch()">
                                Start
                            </button>
                        </span>
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</div>
<div class="row" *ngIf="pageState === 'loading'">
    <div class="col-xs-12 full-width">
        <div id="loading-card-container">
            <mat-card>
                <mat-card-content id="loading-spinner-container">
                    <mat-spinner id="loading-spinner"></mat-spinner>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</div>
<div class="row" *ngIf="pageState === 'afterSearch'">
    <div class="col-xs-12 full-width">
        <div id="instruction-card-container">
            <mat-card>
                <mat-card-content>
                    <span>Remove your <b>{{numToRemove}}</b> least favorite places</span>
                    <br>
                    <span id="search-location">Searching from {{searchLatitude}}, {{searchLongitude}}</span>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
    <div class="col-xs-12 col-md-6 col-lg-4 unremoved-place-column" *ngFor="let place of unremovedPlaces">
        <mat-card>
            <mat-card-header>
                <img mat-card-avatar class="place-thumbnail" src="{{place.image_url}}">
                <mat-card-title class="place-name">{{place.name}}</mat-card-title>
                <mat-card-subtitle>
                    <span class="place-price">{{place.price}}</span>
                    <span class="place-rating-container">
                        <span class="place-rating" *ngFor="let i of getArrayOfLength(place.rating)">â˜…</span>
                    </span>
                    <span class="place-distance">{{(place.distance / 1000).toFixed(1)}} km</span>
                </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <span class="place-address">{{getAddressString(place.location)}}</span>
            </mat-card-content>
        </mat-card>
    </div>
</div>
